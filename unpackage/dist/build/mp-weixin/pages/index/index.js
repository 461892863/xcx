(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"0c5f":function(t,o,n){"use strict";var e=n("46c4"),a=n.n(e);a.a},"23f0":function(t,o,n){"use strict";n.r(o);var e=n("7fef"),a=n("9158");for(var i in a)"default"!==i&&function(t){n.d(o,t,function(){return a[t]})}(i);n("0c5f");var r=n("2877"),c=Object(r["a"])(a["default"],e["a"],e["b"],!1,null,null,null);o["default"]=c.exports},"46c4":function(t,o,n){},"7fef":function(t,o,n){"use strict";var e=function(){var t=this,o=t.$createElement;t._self._c},a=[];n.d(o,"a",function(){return e}),n.d(o,"b",function(){return a})},"8b26":function(t,o,n){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e=a(n("66fd"));function a(t){return t&&t.__esModule?t:{default:t}}var i=function(){return n.e("components/shopcart").then(n.bind(null,"4b6c"))},r=function(){return n.e("components/cartcontrol").then(n.bind(null,"17b1"))},c=function(){return n.e("components/mehaotian-search").then(n.bind(null,"1aa5"))},u=function(){return n.e("components/uni-rate").then(n.bind(null,"dfc2"))},s={data:function(){return{dayCur:-1,buyList:[],worship:[{name:"星期一"},{name:"星期二"},{name:"星期三"},{name:"星期四"},{name:"星期五"}],dataId:"",category:[],goods:[],height:0,foodSTop:0,currentIndex:0}},components:{shopcart:i,cartcontrol:r,mSearch:c,uniRate:u},onLoad:function(){this.height=Number(t.getSystemInfoSync().windowHeight)-210},computed:{getList:function(){var t=[];return this.goods.forEach(function(o){o.foods.forEach(function(o){o.count&&t.push(o)})}),t},getAllCount:function(t){for(var o=this,n=[],a=0,i=function(t){a=0,o.goods[t].foods.forEach(function(n){n.count>=0&&(a+=n.count,e.default.set(o.goods[t],"count",a))}),n.push(a)},r=0;r<this.goods.length;r++)i(r);return n.sort(function(t,o){return t-o}),a=n[n.length-1],a}},onShow:function(){this.getDay()},methods:{getDay:function(){var o=this,n=new Date,e=n.getFullYear(),a=(n.getMonth()+1).toString().padStart(2,"0"),i=n.getDate().toString().padStart(2,"0"),r=e+"-"+a+"-"+i;t.request({url:this.nowUrl+"/foods/index/queryWeek",header:{token:this.token},data:{date:r},success:function(t){o.worship=t.data.data,o.worship.forEach(function(t,n){t.code==r&&(o.dayCur=n,o.dataId=t.id,o.getHistory(t.id),o.getCategory(t.id))})}})},getHistory:function(o){var n=this;n.dayId=o,t.showLoading({mask:!0}),t.request({url:this.nowUrl+"/foods/index/queryHistory",header:{token:this.token},data:{id:o},success:function(o){n.buyList=o.data.data,t.hideLoading()}})},getCategory:function(o){var n=this;t.showLoading({mask:!0}),t.request({url:this.nowUrl+"/foods/index/queryCategory",header:{token:this.token},data:{id:o},success:function(e){n.category=e.data.data;for(var a=0,i=e.data.data.length;a<i;a++)n.goods.push({name:e.data.data[a].categoryName,foods:[]}),n.getFoods(o,a,n.category[a].categoryId);t.hideLoading()}})},getFoods:function(o,n,e){var a=this;t.request({url:this.nowUrl+"/foods/index/queryTableFoods",header:{token:this.token},data:{dateId:o,categoryId:e,foodName:""},success:function(t){var o=0;for(t.data.data.length;o<t.data.data.length;o++)t.data.data[o].count=0;a.goods[n].foods=t.data.data}})},setDay:function(t,o){this.dayCur=t,this.goods=[],this.getHistory(o),this.getCategory(o)},search:function(o){console.log(o),t.request({url:this.nowUrl+"",header:{token:this.token},data:{},success:function(t){console.log(t)}})},select:function(t,o){this.currentIndex=t,this.setScrollH(t)},setScrollH:function(o){var n=this,e=0,a=t.createSelectorQuery(),i=a.selectAll(".foods");this.$nextTick(function(){i.fields({size:!0},function(t){0==o&&(n.foodSTop=0);for(var a=0;a<o;a++)e+=parseInt(t[a].height),n.foodSTop=e}).exec()})},foodDetail:function(o){t.navigateTo({url:"../foodDetail/foodDetail?id="+o+"&dayId="+this.dayId,animationType:"slide-in-right",animationDuration:200})},addCart:function(t){t.count>=0?(t.count++,this.goods.forEach(function(o){o.foods.forEach(function(o){t.name==o.name&&(o.count=t.count)})})):this.goods.forEach(function(o){o.foods.forEach(function(o){t.name==o.name&&e.default.set(o,"count",1)})})},decreaseCart:function(t){t.count&&(t.count--,this.goods.forEach(function(o){o.foods.forEach(function(o){t.name==o.name&&(o.count=t.count)})}))},delAll:function(){this.goods.forEach(function(t){t.foods.forEach(function(t){t.count&&(t.count=0)})})}}};o.default=s}).call(this,n("543d")["default"])},9158:function(t,o,n){"use strict";n.r(o);var e=n("8b26"),a=n.n(e);for(var i in e)"default"!==i&&function(t){n.d(o,t,function(){return e[t]})}(i);o["default"]=a.a}},[["fc0b","common/runtime","common/vendor"]]]);