(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"1a4a":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".food-control[data-v-788a5cbe]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-justify-content:space-around;-ms-flex-pack:distribute;justify-content:space-around}.cont[data-v-788a5cbe]{width:20px;height:20px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:50%;text-align:center}",""])},"290b":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=l(i("7dbe")),o=l(i("dc58")),a=l(i("6d28")),s=l(i("c9b3")),r=l(i("e143")),c=l(i("b6fa"));function l(t){return t&&t.__esModule?t:{default:t}}var d={data:function(){return{carStyle:{direction:"column"},joinTimes:0,imgUrl:"http://106.15.194.58/images/",dayCur:-1,buyList:[],worship:[{name:"星期一"},{name:"星期二"},{name:"星期三"},{name:"星期四"},{name:"星期五"}],dataId:"",selectDay:"",category:[],goods:[],height:0,foodSTop:0,currentIndex:0,cropId:"wwfe021789e015d145"}},components:{shopcart:n.default,cartcontrol:o.default,mSearch:a.default,uniRate:s.default},onLoad:function(){this.token=sessionStorage.getItem("token");this.height=Number(uni.getSystemInfoSync().windowHeight)-55},onHide:function(){},onShow:function(){this.isUserId(),uni.setStorage({key:"aaa",data:"hello",success:function(){console.log("success")}}),c.default.delOrderType=!0},computed:{getList:function(){var t=[];return this.goods.forEach(function(e){e.foods.forEach(function(e){e.count&&t.push(e)})}),t},getAllCount:function(t){for(var e=this,i=[],n=0,o=function(t){n=0,e.goods[t].foods.forEach(function(i){i.count>=0&&(n+=i.count,r.default.set(e.goods[t],"count",n))}),i.push(n)},a=0;a<this.goods.length;a++)o(a);return i.sort(function(t,e){return t-e}),n=i[i.length-1],n}},methods:{getDay:function(){var t=this,e=new Date,i=e.getFullYear(),n=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getDate().toString().padStart(2,"0"),a=i+"-"+n+"-"+o;uni.request({url:this.nowUrl+"/foods/index/queryWeek",header:{token:this.token},data:{date:a},success:function(e){t.worship=e.data.data,t.worship.forEach(function(e,i){e.code==a?(t.dayCur=i,t.dataId=e.id,t.selectDay=e.id,t.getHistory(e.id),t.getCategory(e.id)):uni.showToast({content:"未处于正确的订餐时间",duration:1500})})}})},getHistory:function(t){var e=this;e.dayId=t,uni.showLoading({mask:!0}),uni.request({url:this.nowUrl+"/foods/index/queryHistory",header:{token:this.token},data:{id:t},success:function(t){if(uni.hideLoading(),t.data.data){for(var i=0;i<t.data.data.length;i++)t.data.data[i].count=0;e.buyList=t.data.data}}})},getCategory:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=this;uni.showLoading({mask:!0}),uni.request({url:this.nowUrl+"/foods/index/queryCategory",header:{token:this.token},data:{id:t},success:function(n){i.category=n.data.data;for(var o=0,a=i.category.length;o<a;o++)i.goods.push({name:n.data.data[o].categoryName,foods:[]}),i.getFoods(t,o,i.category[o].categoryId,e);uni.hideLoading()}})},search:function(t){this.getCategory(this.dayId,t)},getFoods:function(t,e,i,n){var o=this;uni.request({url:this.nowUrl+"/foods/index/queryTableFoods",header:{token:this.token},data:{dateId:t,categoryId:i,foodName:n},success:function(t){var i=0;for(t.data.data.length;i<t.data.data.length;i++)t.data.data[i].count=0;o.goods[e].foods=t.data.data}})},setDay:function(t,e){this.dayCur=t,this.goods=[],this.selectDay=e,this.getHistory(e),this.getCategory(e)},select:function(t){0==this.goods[t].foods.length?uni.showToast({title:"暂无"+this.goods[t].name+"菜品",mask:!0,icon:"none",duration:1e3}):this.currentIndex=t,this.setScrollH(t)},setScrollH:function(t){var e=this,i=0,n=uni.createSelectorQuery(),o=n.selectAll(".foods");this.$nextTick(function(){o.fields({size:!0},function(n){0==t&&(e.foodSTop=0);for(var o=0;o<t;o++)i+=parseInt(n[o].height),e.foodSTop=i}).exec()})},setScrollIndex:function(t){},foodDetail:function(t){uni.navigateTo({url:"../foodDetail/foodDetail?id="+t+"&dayId="+this.dayId,animationType:"slide-in-right",animationDuration:200})},addCart:function(t){t.count>=0?(t.count++,this.buyList.forEach(function(e){t.name==e.name&&(e.count=t.count)}),this.goods.forEach(function(e){e.foods.forEach(function(e){t.name==e.name&&(e.count=t.count)})})):(this.goods.forEach(function(e){e.foods.forEach(function(e){t.name==e.name&&r.default.set(e,"count",1)})}),this.buyList.forEach(function(e){t.name==e.name&&r.default.set(e,"count",1)}))},decreaseCart:function(t){t.count&&(t.count--,this.goods.forEach(function(e){e.foods.forEach(function(e){t.name==e.name&&(e.count=t.count)})}),this.buyList.forEach(function(e){t.name==e.name&&(e.count=t.count)}))},delAll:function(){this.goods.forEach(function(t){t.foods.forEach(function(t){t.count&&(t.count=0)})})},isUserId:function(){if(null==this.token||"undefined"==this.token||void 0==this.token){var t=this.GetQueryString("code"),e=window.location.href.split("#")[0];""==t||null==t||void 0==t?window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+this.cropId+"&redirect_uri="+e+"&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect":(this.GetUserId(t),""!=this.token&&window.sessionStorage.setItem("token",this.token))}},GetQueryString:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(e);return null!=i?decodeURIComponent(i[2]):null},GetUserId:function(t){var e="",i=this;return uni.request({url:this.nowUrl+"/wx/getCompanyToken?code="+t+"&mark=0",method:"POST",header:{"content-type":"application/json"},success:function(t){200==t.data.code&&(e=t.data.data,i.token=t.data.data,sessionStorage.setItem("token",i.token),i.getDay())},fail:function(){alert("请求失败")}}),e}}};e.default=d},3307:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".content[data-v-eaba8552]{\n\t/* text-align: center; */\n\t/* height: 400upx; */display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;\n\t/* position: absolute; */top:0;bottom:55px;width:100%;overflow:hidden}.current[data-v-eaba8552]{position:relative;z-index:0;background-color:#fff;color:#00a0dc}.menu-wrapper[data-v-eaba8552]{text-align:center;width:22%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;background:#f3f5f7}.menu-item[data-v-eaba8552]{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:50px}.allcount[data-v-eaba8552]{position:absolute;right:6px;top:8px;display:inline-block;padding:0 4px;font-size:9px;line-height:16px;font-weight:400;border-radius:50%;background-color:#f01414;color:#fff}.foods-wrapper[data-v-eaba8552]{margin-left:4px;width:78%}.content[data-v-eaba8552],.food[data-v-eaba8552],.food-btm[data-v-eaba8552]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row}.food-title[data-v-eaba8552]{padding:2px 0}.food-info[data-v-eaba8552]{margin-left:10px;margin-right:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:2;-webkit-flex:2;-ms-flex:2;flex:2}.food-btm[data-v-eaba8552]{-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.food-price[data-v-eaba8552]{color:#f01414;font-size:16px}.day[data-v-eaba8552]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;text-align:center;padding:%?15?% 0;margin:0 %?5?% %?5?%;border-radius:%?10?%;border:%?1?% #ccc solid;font-size:.8em}.dayActive[data-v-eaba8552]{background:#767676;color:#fff}.listData[data-v-eaba8552]{display:inline-block;width:%?220?%;height:%?100?%;border:%?1?% solid #ccc;border-radius:%?10?%;margin:%?5?%;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;color:#000;font-size:12px;z-index:1}.listName[data-v-eaba8552]{position:absolute;top:%?5?%;left:%?15?%}.listMonney[data-v-eaba8552]{position:absolute;bottom:%?5?%;left:%?15?%}.listData .add[data-v-eaba8552]{position:absolute;bottom:%?0?%;right:%?10?%}.buyLeft[data-v-eaba8552]{width:%?50?%;height:%?100?%;font-size:.7em;background:#fe4e37;color:#fff;line-height:1;padding-top:%?10?%;text-align:center;position:absolute;left:0;z-index:99}.mark[data-v-eaba8552]{padding:%?4?% %?6?%;background:#5d5d5d;color:#fff;font-size:.85em;margin-left:%?15?%;border-radius:%?15?%}.menu-item[data-v-eaba8552]{font-size:.8em}.remainder[data-v-eaba8552]{position:absolute;right:%?20?%;bottom:%?55?%;font-size:.7em;color:#2e2e2e}.remainder1[data-v-eaba8552]{position:absolute;right:%?20?%;top:%?45?%;font-size:.7em;color:#2e2e2e}uni-app[data-v-eaba8552],uni-page-head[data-v-eaba8552]{display:none}.histroyAdd[data-v-eaba8552]{\n\t/* display: inline-block; */\n\t/* position: absolute;\n\tright: 5upx;\n\tbottom: 5upx; */}",""])},"3d89":function(t,e,i){var n=i("3307");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("1216f00d",n,!0,{sourceMap:!1,shadowMode:!1})},"445f":function(t,e,i){"use strict";var n=i("3d89"),o=i.n(n);o.a},4981:function(t,e,i){var n=i("682c");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("54d93a50",n,!0,{sourceMap:!1,shadowMode:!1})},5824:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:{food:{type:Object},carStyle:{type:Object,default:function(){return{display:"flex","flex-direction":"row",height:"27px"}}}},data:function(){return{}},methods:{addCart:function(t){this.$emit("add",t)},decreaseCart:function(t){this.$emit("dec",t)}}};e.default=n},"5f2c":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"search",style:{backgroundColor:t.backgroundColor}},[i("v-uni-view",{staticClass:"content",style:{"border-radius":t.radius+"px",border:t.border}},[i("v-uni-view",{staticClass:"content-box",class:{center:2===t.mode}},[i("v-uni-text",{staticClass:"icon icon-search"},[t._v("")]),i("v-uni-input",{staticClass:"input",class:{center:!t.active&&2===t.mode},attrs:{focus:t.isFocus,placeholder:t.placeholder},on:{focus:function(e){e=t.$handleEvent(e),t.focus(e)},blur:function(e){e=t.$handleEvent(e),t.blur(e)}},model:{value:t.inputVal,callback:function(e){t.inputVal=e},expression:"inputVal"}}),t.isDelShow?i("v-uni-text",{staticClass:"icon icon-del",on:{click:function(e){e=t.$handleEvent(e),t.clear(e)}}},[t._v("")]):t._e()],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.active&&t.show&&"inside"===t.button||t.isDelShow&&"inside"===t.button,expression:"(active && show && button === 'inside') || (isDelShow && button === 'inside')"}],staticClass:"searchBtn",on:{click:function(e){e=t.$handleEvent(e),t.search(e)}}},[t._v("搜索")])],1),"outside"===t.button?i("v-uni-view",{staticClass:"button",class:{active:t.show||t.active},on:{click:function(e){e=t.$handleEvent(e),t.search(e)}}},[i("v-uni-view",{staticClass:"button-item"},[t._v(t._s(t.show?"搜索":t.searchName))])],1):t._e()],1)},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},"682c":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.search[data-v-0b1be029]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;border-bottom:1px #f5f5f5 solid;-webkit-box-sizing:border-box;box-sizing:border-box;padding:%?15?%;font-size:%?28?%;background:#fff}.search .content[data-v-0b1be029]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;width:100%;height:%?60?%;border:1px #ccc solid;background:#fff;overflow:hidden;-webkit-transition:all .2s linear;-o-transition:all .2s linear;transition:all .2s linear;border-radius:30px}.search .content .content-box[data-v-0b1be029]{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.search .content .content-box.center[data-v-0b1be029]{-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.search .content .content-box .icon[data-v-0b1be029]{padding:0 %?15?%}.search .content .content-box .icon.icon-del[data-v-0b1be029]{font-size:%?38?%}.search .content .content-box .input[data-v-0b1be029]{width:100%;max-width:100%;line-height:%?60?%;height:%?60?%;-webkit-transition:all .2s linear;-o-transition:all .2s linear;transition:all .2s linear}.search .content .content-box .input.center[data-v-0b1be029]{width:%?200?%}.search .content .content-box .input.sub[data-v-0b1be029]{width:auto;color:grey}.search .content .searchBtn[data-v-0b1be029]{height:100%;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;padding:0 %?30?%;background:#4cd964;line-height:%?60?%;color:#fff;border-left:1px #ccc solid;-webkit-transition:all .3s;-o-transition:all .3s;transition:all .3s}.search .button[data-v-0b1be029]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;width:0;-webkit-transition:all .2s linear;-o-transition:all .2s linear;transition:all .2s linear;white-space:nowrap;overflow:hidden}.search .button.active[data-v-0b1be029]{padding-left:%?15?%;width:%?100?%}@font-face{font-family:iconfont;src:url(https://at.alicdn.com/t/font_989023_efq0mtli526.ttf) format("truetype")}.icon[data-v-0b1be029]{font-family:iconfont;font-size:%?32?%;font-style:normal;color:#999}',""])},"6d28":function(t,e,i){"use strict";i.r(e);var n=i("5f2c"),o=i("ad1d");for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);i("9909");var s=i("2877"),r=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,"0b1be029",null);e["default"]=r.exports},"71e6":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"shopcart"},[i("v-uni-view",{staticClass:"cartBottom"},[i("v-uni-view",{staticClass:"carIcon"},[i("v-uni-view",{staticClass:"iconBox",class:t.getAllCount?"active":""},[t.getAllCount?i("v-uni-text",{staticClass:"allcount"},[t._v(t._s(t.getAllCount))]):t._e(),i("v-uni-image",{staticClass:"img",attrs:{src:"/static/cart.png",mode:""}})],1)],1),i("v-uni-view",{staticClass:"middle"},[i("v-uni-text",{staticClass:"price",class:t.getAllCount?"active":""},[t._v("总金额￥"+t._s(t.getAllPrice))])],1),i("v-uni-view",{staticClass:"BtnRight",on:{click:function(e){e=t.$handleEvent(e),t.toggleList(e)}}},[i("v-uni-text",[t._v("确认订单")])],1)],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.isShowList&&t.getList.length,expression:"isShowList && getList.length"}],staticClass:"cartList"},[i("v-uni-scroll-view",{staticStyle:{"max-height":"200px"},attrs:{"scroll-y":""}},[i("v-uni-view",{staticClass:"title"},[i("v-uni-text",[t._v("购物车")]),i("v-uni-view",{staticClass:"clear",on:{click:function(e){e=t.$handleEvent(e),t.delShopcart(e)}}},[t._v("清空")])],1),i("v-uni-view",{staticClass:"list"},t._l(t.getList,function(e,n){return i("v-uni-view",{key:n,staticClass:"list-text"},[i("v-uni-text",{staticStyle:{flex:"1"}},[t._v(t._s(e.name))]),i("v-uni-text",{staticStyle:{flex:"1"}},[t._v("￥"+t._s(e.price))]),i("cartcontrol",{attrs:{food:e},on:{add:function(e){e=t.$handleEvent(e),t.addCart(e)},dec:function(e){e=t.$handleEvent(e),t.decreaseCart(e)}}})],1)}),1)],1)],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.isShowList&&t.getList.length,expression:"isShowList && getList.length"}],staticClass:"listMask"})],1)},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},"744d":function(t,e,i){"use strict";i.r(e);var n=i("5824"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=o.a},"7ab6":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{style:t.carStyle},[i("v-uni-view",{staticClass:"food-control"},[i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count > 0"}],staticClass:"cont",staticStyle:{"margin-top":"2px"},on:{click:function(e){e.stopPropagation(),e=t.$handleEvent(e),t.decreaseCart(t.food)}}},[i("v-uni-image",{staticStyle:{width:"45upx",height:"45upx"},attrs:{src:"/static/des.png",mode:""}})],1),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count > 0"}],staticStyle:{padding:"0 4px","font-weight":"bold","font-size":"16px",position:"relative",top:"6upx"}},[t._v(t._s(t.food.count))])],1),i("v-uni-view",{staticClass:"cont",staticStyle:{flex:"1","margin-top":"2px"},on:{click:function(e){e.stopPropagation(),e=t.$handleEvent(e),t.addCart(t.food)}}},[i("v-uni-image",{staticStyle:{width:"45upx",height:"45upx",color:"#CCCCCC"},attrs:{src:"/static/add2.png",mode:""}})],1)],1)},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},"7dbe":function(t,e,i){"use strict";i.r(e);var n=i("71e6"),o=i("db3a");for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);i("bb3f");var s=i("2877"),r=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,"70c9693e",null);e["default"]=r.exports},"947a":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:{mode:{type:Number,default:1},button:{type:String,default:"outside"},show:{type:Boolean,default:!0},radius:{type:String,default:"60"},placeholder:{type:String,default:"请输入搜索内容"},backgroundColor:{type:String,default:"#fff"},border:{type:String,default:"1px #c6c6c6 solid"}},data:function(){return{active:!1,inputVal:"",searchName:"取消",isDelShow:!1,isFocus:!1}},methods:{focus:function(){this.active=!0},blur:function(){this.isFocus=!1,this.inputVal||(this.active=!1)},clear:function(){this.inputVal="",this.active=!1,this.$emit("search","")},getFocus:function(){this.isFocus=!0},search:function(){this.inputVal&&this.$emit("search",this.inputVal)}},watch:{inputVal:function(t){t?(this.searchName="搜索",this.isDelShow=!0):(this.searchName="取消",this.isDelShow=!1)}}};e.default=n},9909:function(t,e,i){"use strict";var n=i("4981"),o=i.n(n);o.a},"9bf4":function(t,e,i){"use strict";var n=i("a5f3"),o=i.n(n);o.a},a36a:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("dc58"));function o(t){return t&&t.__esModule?t:{default:t}}var a={props:{goods:{type:Array}},data:function(){return{isShowList:!1}},onUnload:function(){this.allCount<=0&&alert(1)},onLoad:function(){},components:{cartcontrol:n.default},computed:{getList:function(){var t=[];this.goods.forEach(function(e){e.foods.forEach(function(e){e.count&&t.push(e)})});for(var e=[],i=[],n=0;n<t.length;n++)-1==e.indexOf(t[n].id)&&(e.push(t[n].id),i.push(t[n]));return i},getAllCount:function(){var t=0;return this.getList.forEach(function(e){t+=e.count}),this.$emit("allCount",t),t},getAllPrice:function(){var t=this,e=0,i=0;return this.getList.forEach(function(n){i+=t.accMul(n.count,n.price),e=i.toFixed(2)}),e}},methods:{accMul:function(t,e){var i=0,n="",o="";t&&null!=t&&(n=t.toString()),e&&null!=e&&(o=e.toString());try{i+=n.split(".")[1].length}catch(a){}try{i+=o.split(".")[1].length}catch(a){}return Number(n.replace(".",""))*Number(o.replace(".",""))/Math.pow(10,i)},showCart:function(){this.isShowList=!this.isShowList},toggleList:function(){this.token=sessionStorage.getItem("token");var t=this,e=[];this.getList.forEach(function(t){e.push({foodId:t.id,num:t.count})});var i=JSON.stringify(e);this.getList.length?uni.request({url:this.nowUrl+"/foods/shopcar/build",header:{token:this.token,"content-type":"application/json"},method:"POST",data:i,success:function(e){var i=JSON.stringify(e.data.data);if(200!=e.data.code)return uni.showToast({title:e.data.msg,duration:1e3,icon:"none"}),!1;t.delShopcart(),uni.navigateTo({url:"../orderDetails/orderDetails?dataInfo="+i,animationDuration:200,animationType:"slide-in-right"})}}):uni.showToast({title:"您的购物车空的",duration:1e3,icon:"none"})},delShopcart:function(){this.$emit("delAll")},addCart:function(t){this.$emit("add",t)},decreaseCart:function(t){this.$emit("dec",t)}}};e.default=a},a5f3:function(t,e,i){var n=i("1a4a");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("4f864e2a",n,!0,{sourceMap:!1,shadowMode:!1})},ace7:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"idnexBox",staticStyle:{width:"100vw",height:"100vh",overflow:"hidden",display:"flex","flex-direction":"column"}},[i("v-uni-view",{staticStyle:{width:"100vw",height:"100upx",background:"#f4f4f4"}},[i("mSearch",{attrs:{mode:2,button:"inside"},on:{search:function(e){e=t.$handleEvent(e),t.search(e)}}})],1),i("v-uni-view",{staticClass:"worship",staticStyle:{width:"100vw",display:"flex",height:"auto",overflow:"hidden",flex:"none"}},t._l(t.worship,function(e,n){return i("v-uni-view",{key:n,staticClass:"day",class:{dayActive:n==t.dayCur},on:{click:function(i){i=t.$handleEvent(i),t.setDay(n,e.id)}}},[t._v(t._s(e.name))])}),1),i("v-uni-view",{staticClass:"buyList",staticStyle:{height:"110upx","border-bottom":"3px solid #f3f5f7","padding-left":"55rpx",position:"relative"}},[i("v-uni-view",{staticClass:"buyLeft",staticStyle:{"white-space":"normal","font-size":"0.8em",display:"flex","flex-direction":"column"}},[t._v("买过的")]),i("v-uni-scroll-view",{staticStyle:{height:"100%","white-space":"nowrap"},attrs:{"scroll-x":"true","scroll-with-animation":"true"}},t._l(t.buyList,function(e,n){return i("v-uni-view",{key:n,staticClass:"listData",on:{click:function(i){i=t.$handleEvent(i),t.foodDetail(e.id)}}},[i("v-uni-text",{staticClass:"listName"},[t._v(t._s(e.name))]),i("v-uni-text",{staticClass:"listMonney"},[t._v("￥"+t._s(e.price))]),t.dataId==t.selectDay?i("cartcontrol",{staticClass:"add",style:t.carStyle,attrs:{food:e},on:{add:function(e){e=t.$handleEvent(e),t.addCart(e)},dec:function(e){e=t.$handleEvent(e),t.decreaseCart(e)}}}):t._e()],1)}),1)],1),i("v-uni-view",{staticClass:"content",staticStyle:{height:"100%",overflow:"hidden"}},[i("v-uni-scroll-view",{staticClass:"menu-wrapper",staticStyle:{height:"100%","border-right":"1px solid #ddd","padding-bottom":"54px","box-sizing":"border-box"},attrs:{"scroll-y":""}},[i("v-uni-view",{ref:"menuWrapper"},t._l(t.category,function(e,n){return i("v-uni-view",{key:n,ref:"menuList",refInFor:!0,class:{current:t.currentIndex==n},staticStyle:{position:"relative"},on:{click:function(i){i=t.$handleEvent(i),t.select(n,e.categoryId)}}},[i("v-uni-view",{staticClass:"menu-item"},[t._v(t._s(e.categoryName))]),t.getAllCount>=e.count&&e.count>0?i("v-uni-text",{staticClass:"allcount"},[t._v(t._s(e.count))]):t._e()],1)}),1)],1),i("v-uni-scroll-view",{staticClass:"foods-wrapper",staticStyle:{"box-sizing":"border-box"},style:"height:"+t.height+"px",attrs:{"scroll-y":"","scroll-top":t.foodSTop},on:{scroll:function(e){e=t.$handleEvent(e),t.setScrollIndex(e)}}},[i("v-uni-view",{ref:"foodsWrapper",staticStyle:{overflow:"auto","box-sizing":"border-box","padding-bottom":"650upx"}},t._l(t.goods,function(e,n){return i("v-uni-view",{key:n,ref:"foodList",refInFor:!0,staticClass:"foods"},[e.foods.length>0?i("v-uni-view",{staticClass:"food-title",staticStyle:{background:"#f3f5f7",color:"#666"}},[t._v(t._s(e.name))]):t._e(),t._l(e.foods,function(e,n){return i("v-uni-view",{key:n,staticClass:"food",staticStyle:{position:"relative","border-bottom":"1px #f3f5f7 solid"},on:{click:function(i){i=t.$handleEvent(i),t.foodDetail(e.id)}}},[i("v-uni-image",{staticStyle:{width:"75px",height:"75px","margin-top":"6px"},attrs:{src:t.imgUrl+e.thumbnails,mode:""}}),i("v-uni-view",{staticClass:"food-info"},[i("v-uni-text",{staticStyle:{"font-size":"15px","margin-top":"2px"}},[t._v(t._s(e.name)),e.sign?i("v-uni-text",{staticClass:"mark"},[t._v(t._s(e.sign))]):t._e()],1),i("uniRate",{attrs:{value:e.level,size:"10",disabled:"true"}},[t._v(t._s(e.level))]),"1"===e.notReserve?i("v-uni-view",{staticStyle:{position:"absolute",right:"20rpx",top:"50rpx","font-size":".9rem",color:"#eb1f4f",display:"flex","align-items":"center"}},[i("v-uni-image",{staticStyle:{width:"50rpx",height:"50rpx"},attrs:{src:"../../static/noFood.png"}}),t._v("非预定菜品")],1):t._e(),i("v-uni-view",["0"===e.notReserve?i("v-uni-text",{staticClass:"remainder",staticStyle:{"font-size":"14px",margin:"2px 0 4px"}},[t._v("剩余"),i("v-uni-text",{staticStyle:{"font-weight":"bold"}},[i("v-uni-text",{staticStyle:{color:"red","font-size":"16px"}},[t._v(t._s(e.limitNum-e.count))])],1),t._v(t._s(e.unit))],1):t._e(),t.dataId==t.selectDay&&"0"===e.notReserve?i("v-uni-text",{staticStyle:{"font-size":"12px",margin:"2px 0 4px"}},[t._v("售出"),i("v-uni-text",[t._v(t._s(e.sellNum))]),t._v(t._s(e.unit))],1):t._e()],1),i("v-uni-view",{staticClass:"food-btm"},[i("v-uni-text",{staticClass:"food-price"},[t._v("￥"+t._s(e.price))]),t.dataId==t.selectDay&&"0"===e.notReserve?i("cartcontrol",{attrs:{food:e},on:{add:function(e){e=t.$handleEvent(e),t.addCart(e)},dec:function(e){e=t.$handleEvent(e),t.decreaseCart(e)}}}):t._e()],1)],1)],1)})],2)}),1)],1),i("shopcart",{attrs:{goods:t.goods},on:{add:function(e){e=t.$handleEvent(e),t.addCart(e)},dec:function(e){e=t.$handleEvent(e),t.decreaseCart(e)},delAll:function(e){e=t.$handleEvent(e),t.delAll(e)}}})],1)],1)},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},ad1d:function(t,e,i){"use strict";i.r(e);var n=i("947a"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=o.a},b1eb:function(t,e,i){"use strict";i.r(e);var n=i("ace7"),o=i("e61b");for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);i("445f");var s=i("2877"),r=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,"eaba8552",null);e["default"]=r.exports},b420:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".list-text[data-v-70c9693e]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row}.shopcart .cartBottom[data-v-70c9693e]{position:fixed;bottom:50px;left:0;right:0;height:54px;z-index:99;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;background-color:#909090}.carIcon[data-v-70c9693e]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.iconBox[data-v-70c9693e]{position:absolute;bottom:22px;left:18px;z-index:101;background-color:#46494b;border-radius:50%;height:48px;width:48px;line-height:55px\n\t/* border: 6px solid #141d27; */}.iconBox .allcount[data-v-70c9693e]{position:absolute;right:-6px;top:0;display:inline-block;padding:0 6px;font-size:9px;line-height:16px;font-weight:400;border-radius:10px;background-color:red;color:#fff\n\t/* position: relative; */}.img[data-v-70c9693e]{font-size:24px;width:30px;height:30px;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);color:#ccc;border-radius:50%}.carIcon .active[data-v-70c9693e]{background-color:#00a0dc}.middle[data-v-70c9693e]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:2;-webkit-flex:2;-ms-flex:2;flex:2;color:#fff;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.BtnRight[data-v-70c9693e]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;line-height:54px;text-align:center;background:#000;color:#fff}.cartList[data-v-70c9693e]{position:fixed;bottom:54px;left:0;right:0;z-index:90}.cartList .list-text[data-v-70c9693e],.cartList .title[data-v-70c9693e]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row}.cartList .title[data-v-70c9693e]{background:#f3f5f7;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:4px 8px}.cartList .list-text[data-v-70c9693e]{padding:10px 6px 10px 8px;text-align:center}.list[data-v-70c9693e]{background:#f8f8f8;padding-bottom:10px}\n\n/* 遮布 */.listMask[data-v-70c9693e]{position:fixed;top:0;left:0;right:0;bottom:0;z-index:89;opacity:.7;background:#000}.price[data-v-70c9693e]{margin-top:%?10?%}",""])},b6fa:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=!1,o={delOrderType:n};e.default=o},bb3f:function(t,e,i){"use strict";var n=i("f7e0"),o=i.n(n);o.a},db3a:function(t,e,i){"use strict";i.r(e);var n=i("a36a"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=o.a},dc58:function(t,e,i){"use strict";i.r(e);var n=i("7ab6"),o=i("744d");for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);i("9bf4");var s=i("2877"),r=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,"788a5cbe",null);e["default"]=r.exports},e61b:function(t,e,i){"use strict";i.r(e);var n=i("290b"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=o.a},f7e0:function(t,e,i){var n=i("b420");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("7ee318b7",n,!0,{sourceMap:!1,shadowMode:!1})}}]);