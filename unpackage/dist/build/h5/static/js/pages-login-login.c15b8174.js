(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{"0f06":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".code[data-v-2f7eef51]{width:calc(70%);margin:40% auto;font-size:.9em}.phoneInput[data-v-2f7eef51]{background:#fff;width:calc(100% - %?30?%);padding:%?20?% %?15?%;margin:%?30?% auto;border-radius:%?15?%}.getCode[data-v-2f7eef51]{width:%?150?%;text-align:center;font-size:.7em;padding:%?10?% %?5?%;position:absolute;right:%?15?%;bottom:%?160?%;background:#007aff;color:#fff;border-radius:%?10?%;z-index:99}",""])},"49b7":function(e,t,n){"use strict";n.r(t);var o=n("a0ea"),i=n("56a5");for(var a in i)"default"!==a&&function(e){n.d(t,e,function(){return i[e]})}(a);n("cbfe");var s=n("2877"),u=Object(s["a"])(i["default"],o["a"],o["b"],!1,null,"2f7eef51",null);t["default"]=u.exports},"56a5":function(e,t,n){"use strict";n.r(t);var o=n("cbf5"),i=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);t["default"]=i.a},a0ea:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticStyle:{width:"100vw",height:"100vh",overflow:"hidden",position:"relative",background:"url(../../static/xiaomi.jpg) 0 0 no-repeat","background-size":"100% 100%"}},[n("v-uni-view",{staticClass:"code",staticStyle:{position:"relative"}},[n("v-uni-input",{staticClass:"phoneInput",attrs:{type:"number",value:"phone",placeholder:"请输入手机号"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),n("v-uni-input",{staticClass:"phoneInput",attrs:{type:"number",value:"code",placeholder:"请输入验证码"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),n("v-uni-button",{staticClass:"getCode",attrs:{"open-type":"getUserInfo",withCredentials:"true"},on:{getuserinfo:function(t){t=e.$handleEvent(t),e.getCode(t)}}},[e._v("获取验证码")]),n("v-uni-button",{staticStyle:{padding:"10upx 15upx",background:"#007AFF","border-radius":"20upx",width:"100%"},attrs:{type:"primary"},on:{click:function(t){t=e.$handleEvent(t),e.login(t)}}},[e._v("开始点餐")])],1)],1)},i=[];n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i})},cbf5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={data:function(){return{phone:"18707076473",code:""}},methods:{getCode:function(e){var t=this,n=/^1(3|4|5|7|8)\d{9}$/.test(this.phone);return uni.getUserInfo({provider:"weixin",success:function(n){n.userInfo.nickName,n.userInfo.avatarUrl;try{uni.setStorageSync("isCanUse",!1),t.updateUserInfo()}catch(e){}},fail:function(e){}}),""==this.phone?(uni.showToast({title:"请填写手机号码~",duration:1e3,icon:"none"}),!1):n?(console.log(this.phone),void uni.request({url:this.nowUrl+"/sms/send?mobile="+this.phone,method:"POST",header:{token:this.token},success:function(e){200==e.data.code&&(t.code=e.data.data)}})):(uni.showToast({title:"手机号码有误~",duration:1e3,icon:"none"}),!1)},login:function(){var e=this;if(""==this.phone&&""==this.code)return uni.showToast({title:"手机号码或验证码为空~",duration:1e3,icon:"none"}),!1;uni.switchTab({url:"../index/index"}),uni.showLoading({title:"登录中..."}),uni.login({provider:"weixin",success:function(t){var n=t.code;e.isCanUse||uni.getUserInfo({provider:"weixin",success:function(e){e.userInfo.nickName,e.userInfo.avatarUrl}}),console.log(n),uni.request({url:e.nowUrl+"/wx/code2Session?code="+n,header:{token:e.token},method:"POST",success:function(e){console.log(e),uni.hideLoading()}})}})},updateUserInfo:function(){var e=this;uni.request({url:"url",data:{appKey:this.$store.state.appKey,customerId:e.customerId,nickName:e.nickName,headUrl:e.avatarUrl},method:"POST",header:{"content-type":"application/json"},success:function(e){"success"==e.data.state&&uni.reLaunch({url:"/pages/index/index"})}})}}};t.default=o},cbfe:function(e,t,n){"use strict";var o=n("d56a"),i=n.n(o);i.a},d56a:function(e,t,n){var o=n("0f06");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=n("4f06").default;i("4ddca28e",o,!0,{sourceMap:!1,shadowMode:!1})}}]);