<view class="idnexBox" style="width:100vw;height:100vh;overflow:hidden;display:flex;flex-direction:column;" bind:__l="__l"><view style="width:100vw;height:100rpx;background:#f4f4f4;"><m-search mode="{{2}}" button="inside" data-event-opts="{{[['^search',[['search',['$event']]]]]}}" bind:search="__e"></m-search></view><view class="worship" style="width:100vw;display:flex;height:auto;overflow:hidden;flex:none;"><block wx:for="{{worship}}" wx:for-item="day" wx:for-index="_index" wx:key="_index"><view data-event-opts="{{[['tap',[['setDay',[_index,'$0'],[[['worship','',_index,'id']]]]]]]}}" class="{{['day',(_index==dayCur)?'dayActive':'']}}" bindtap="__e">{{day.name}}</view></block></view><view class="buyList" style="height:110rpx;border-bottom:3px solid #f3f5f7;padding-left:55rpx;position:relative;"><view class="buyLeft" style="white-space:normal;font-size:0.8em;display:flex;flex-direction:column;">买过的</view><scroll-view style="height:100%;white-space:nowrap;" scroll-x="true" scroll-with-animation="true"><block wx:for="{{buyList}}" wx:for-item="list" wx:for-index="index_" wx:key="index_"><view data-event-opts="{{[['tap',[['foodDetail',['$0'],[[['buyList','',index_,'id']]]]]]]}}" class="listData" bindtap="__e"><text class="listName">{{list.name}}</text><text class="listMonney">{{"￥"+list.price}}</text><cartcontrol class="add" style="{{(carStyle)}}" food="{{list}}" data-event-opts="{{[['^add',[['addCart']]],['^dec',[['decreaseCart']]]]}}" bind:add="__e" bind:dec="__e"></cartcontrol></view></block></scroll-view></view><view class="content" style="height:100%;overflow:hidden;"><scroll-view class="menu-wrapper" style="height:100%;border-right:1px solid #ddd;padding-bottom:54px;box-sizing:border-box;" scroll-y><view data-ref="menuWrapper" class="vue-ref"><block wx:for="{{category}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-ref="menuList" data-event-opts="{{[['tap',[['select',[index,'$0'],[[['category','',index,'categoryId']]]]]]]}}" class="{{['vue-ref-in-for',(currentIndex==index)?'current':'']}}" style="position:relative;" bindtap="__e"><view class="menu-item">{{item.categoryName}}</view><block wx:if="{{getAllCount>=item.count&&item.count>0}}"><text class="allcount">{{item.count}}</text></block></view></block></view></scroll-view><scroll-view class="foods-wrapper" style="{{'box-sizing:border-box;'+('height:'+height+'px')}}" scroll-y scroll-top="{{foodSTop}}" data-event-opts="{{[['scroll',[['setScrollIndex',['$event']]]]]}}" bindscroll="__e"><view data-ref="foodsWrapper" class="vue-ref" style="overflow:auto;box-sizing:border-box;padding-bottom:650rpx;"><block wx:for="{{goods}}" wx:for-item="item" wx:for-index="i" wx:key="i"><view data-ref="foodList" class="foods vue-ref-in-for"><block wx:if="{{item.foods.length>0}}"><view class="food-title" style="background:#f3f5f7;color:#666;">{{''+item.name+''}}</view></block><block wx:for="{{item.foods}}" wx:for-item="food" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['foodDetail',['$0'],[[['goods','',i],['foods','',index,'id']]]]]]]}}" class="food" style="position:relative;border-bottom:1px #f3f5f7 solid;" bindtap="__e"><image style="width:75px;height:75px;margin-top:6px;" src="{{imgUrl+food.thumbnails}}" mode></image><view class="food-info"><text style="font-size:15px;margin-top:2px;">{{food.name+''}}<block wx:if="{{food.sign}}"><text class="mark">{{food.sign}}</text></block></text><uni-rate value="{{food.level}}" size="10" disabled="true" vue-slots="{{['default']}}">{{food.level}}</uni-rate><block wx:if="{{item.name==='不可预定'}}"><view style="position:absolute;right:20rpx;top:10rpx;font-size:.8rem;color:#eb1f4f;display:flex;align-items:center;"><image style="width:50rpx;height:50rpx;" src="../../static/noFood.png"></image>不可预订</view></block><view><text class="remainder" style="font-size:14px;margin:2px 0 4px;">剩余<text style="font-weight:bold;"><text style="color:red;font-size:16px;">{{''+(food.limitNum-food.count)}}</text></text>{{''+food.unit}}</text><text style="font-size:12px;margin:2px 0 4px;">售出<text>{{food.sellNum}}</text>{{''+food.unit}}</text></view><view class="food-btm"><text class="food-price">{{"￥"+food.price}}</text><block wx:if="{{item.name!='不可预定'}}"><cartcontrol food="{{food}}" data-event-opts="{{[['^add',[['addCart']]],['^dec',[['decreaseCart']]]]}}" bind:add="__e" bind:dec="__e"></cartcontrol></block></view></view></view></block></view></block></view></scroll-view><shopcart goods="{{goods}}" data-event-opts="{{[['^add',[['addCart']]],['^dec',[['decreaseCart']]],['^delAll',[['delAll']]]]}}" bind:add="__e" bind:dec="__e" bind:delAll="__e"></shopcart></view></view>